# TUI Theme Audit ‚Äî Nord/Arctic —Ü–≤–µ—Ç–æ–≤–∞—è —Ç–µ–º–∞

**–°—Ç–∞—Ç—É—Å:** üî¥ –ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞ ‚Äî —Ñ–æ–Ω –æ—Å—Ç–∞—ë—Ç—Å—è –∑–µ–ª—ë–Ω—ã–º (textual-dark teal)
**–î–∞—Ç–∞:** 2026-02-16

---

## –¶–µ–ª—å

### –ö–∞–∫ –¥–æ–ª–∂–Ω–æ –≤—ã–≥–ª—è–¥–µ—Ç—å (Nord —Ç–µ–º–∞)

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë Membria CLI                              12:34:56                     ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë                                                    ‚ïë ü§ñ AGENTS        ‚ïë
‚ïë  Membria CLI  backend ¬∑ Architect, Senior Dev      ‚ïë ‚úÖ Architect     ‚ïë
‚ïë                                                    ‚ïë ‚úÖ Senior Dev    ‚ïë
‚ïë  ‚ñ∏ plan db schema                                  ‚ïë ‚úÖ Junior Dev    ‚ïë
‚ïë    ‚Üí Architect: Use CQRS with event sourcing...    ‚ïë                  ‚ïë
‚ïë                                                    ‚ïë üìä CALIBRATION   ‚ïë
‚ïë                                                    ‚ïë Architect  89%   ‚ïë
‚ïë                                                    ‚ïë Security   93%   ‚ïë
‚ïë                                                    ‚ïë                  ‚ïë
‚ïë                                                    ‚ïë üí¨ SESSION       ‚ïë
‚ïë                                                    ‚ïë Decisions: 3     ‚ïë
‚ïë                                                    ‚ïë Mode: pipeline   ‚ïë
‚ïë                                                    ‚ïë                  ‚ïë
‚ïë                                                    ‚ïë üîç LAST DECISIONS‚ïë
‚ïë                                                    ‚ïë 1. Plan DB (100%)‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë membria ‚ñ∏ [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]         ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë  pipeline  ‚îÇ  ‚úì3 ‚äô0  ‚îÇ  1,234 tok  ‚îÇ  ‚úì graph                       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

**–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ Nord:**
- –§–æ–Ω: `#2E3440` (—Ç—ë–º–Ω–æ-—Å–µ—Ä—ã–π, –∫–∞–∫ –Ω–æ—á–Ω–æ–µ –Ω–µ–±–æ)
- –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å: `#3B4252` (—á—É—Ç—å —Å–≤–µ—Ç–ª–µ–µ —Ñ–æ–Ω–∞)
- –ü–∞–Ω–µ–ª—å: `#434C5E` (sidebar, input container)
- Primary: `#88C0D0` (–≥–æ–ª—É–±–æ–π ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏, borders)
- Secondary: `#81A1C1` (—Å–∏–Ω–∏–π)
- Accent: `#5E81AC` (—Ç—ë–º–Ω–æ-—Å–∏–Ω–∏–π)
- –£—Å–ø–µ—Ö: `#A3BE8C` (–∑–µ–ª—ë–Ω—ã–π)
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: `#EBCB8B` (–∂—ë–ª—Ç—ã–π)
- –û—à–∏–±–∫–∞: `#BF616A` (–∫—Ä–∞—Å–Ω—ã–π)

**–ö–ª—é—á–µ–≤–æ–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç:** —Ñ–æ–Ω `#2E3440` (—Ç—ë–º–Ω–æ-—Å–µ—Ä—ã–π) vs textual-dark —Ñ–æ–Ω `#1e2a2a` (—Ç—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π). –ó–µ–ª—ë–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫ ‚Äî –≥–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞.

---

## –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ |
|------|-------------|
| `src/membria/interactive/textual_shell.py` | –ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä TUI: Nord —Ç–µ–º–∞, StatusBar, SidePanel, InputContainer, CSS |
| `src/membria/interactive/commands.py` | –î–æ–±–∞–≤–ª–µ–Ω—ã `/tok`, `/tokens`, `/init`, `/start` –∫–æ–º–∞–Ω–¥—ã |
| `pyproject.toml` | `textual>=0.50.0` ‚Üí `textual>=0.80.0` |
| `TUI_THEME_AUDIT.md` | –≠—Ç–æ—Ç —Ñ–∞–π–ª ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã |

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è

1. **–ò–∑—É—á–µ–Ω–∏–µ Textual docs** ‚Äî –ø—Ä–æ—á–∏—Ç–∞–Ω—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫–∏ –ø–æ —Ç–µ–º–∞–º, Input, CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Textual** ‚Äî `0.50.0` ‚Üí `7.5.0` (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω), `pyproject.toml` —Ç—Ä–µ–±—É–µ—Ç `>=0.80.0`
3. **–†–µ—Ñ–∞–∫—Ç–æ—Ä ColorSystem ‚Üí Theme** ‚Äî —É–±—Ä–∞–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∞—è `ColorSystem`, –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `register_theme`
4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ InputContainer** ‚Äî `Static` ‚Üí `Vertical` –¥–ª—è —Ä–∞–±–æ—Ç—ã key events (‚Üë‚Üì –∏—Å—Ç–æ—Ä–∏—è)
5. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Input border** ‚Äî `border: tall` ‚Üí `border: none` + `height: 1`
6. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ command bar** ‚Äî `#input-container height: 3` —Å `border-top + border-bottom`
7. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ status bar** ‚Äî —É–±—Ä–∞–Ω `Footer` (–ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª), —Å—Ç–∞—Ç—É—Å –±–∞—Ä –ø–æ–ª—É—á–∏–ª `border-top`
8. **–£–±—Ä–∞–Ω–∞ —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ $** ‚Äî –∏–∑ SidePanel —É–±—Ä–∞–Ω—ã –¥–æ–ª–ª–∞—Ä—ã, —Ç–æ–∫–µ–Ω—ã —Ç–æ–ª—å–∫–æ –≤ status bar
9. **–î–æ–±–∞–≤–ª–µ–Ω–∞ `/tok` –∫–æ–º–∞–Ω–¥–∞** ‚Äî –≤ `commands.py` –æ–±—â–∏–π —Å—á—ë—Ç—á–∏–∫ —Ç–æ–∫–µ–Ω–æ–≤
10. **–î–æ–±–∞–≤–ª–µ–Ω—ã `/init`, `/start`** ‚Äî —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
11. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω AgentExecutor** ‚Äî —É–±—Ä–∞–Ω –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `TaskRouter.route()` ‚Üí `executor.run_orchestration()`
12. **`object.__setattr__` hack** ‚Äî –ø–æ–ø—ã—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Nord –¥–æ `super().__init__()`
13. **–ù–∞–ø–∏—Å–∞–Ω TUI_THEME_AUDIT.md** ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫

### –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Å—Ç–∞ –∫–æ–¥–∞

```
textual_shell.py:348-351  ‚Äî __init__ —Å _reactive_theme hack
textual_shell.py:224-346  ‚Äî CSS —Å Nord $variables
textual_shell.py:162-208  ‚Äî InputContainer (Vertical)
textual_shell.py:22-62    ‚Äî StatusBar.render()
textual_shell.py:67-157   ‚Äî SidePanel
commands.py               ‚Äî /tok, /init, /start –∫–æ–º–∞–Ω–¥—ã
```

---

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Textual
- `textual 0.50.0` ‚Üí `textual 7.5.0`
- `pyproject.toml`: `textual>=0.80.0`

### 2. –ü–µ—Ä–µ—Ö–æ–¥ —Å ColorSystem –Ω–∞ Theme API
–ë—ã–ª–æ:
```python
from textual.design import ColorSystem
ARCTIC_DARK = ColorSystem(primary="#88C0D0", background="#2E3440", ...)
self.design = {"dark": ARCTIC_DARK, "light": ARCTIC_LIGHT}
```
–°—Ç–∞–ª–æ:
```python
from textual.theme import Theme
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é Nord —Ç–µ–º—É (BUILTIN_THEMES)
# Nord: background=#2E3440, surface=#3B4252, primary=#88C0D0
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è command bar –∏ status bar
- `InputContainer` –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å: `Static` ‚Üí `Vertical` (—Ñ–∏–∫—Å —Ñ–æ–∫—É—Å–∞ –∏ key events)
- `Input border: none` + `height: 1` (–ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: border —Å—ä–µ–¥–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏)
- `#input-container height: 3` —Å `border-top + border-bottom`
- `#status-bar height: 3` —Å `border-top + border-bottom`

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TaskRouter
- –£–±—Ä–∞–Ω –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `router.route()` ‚Üí `executor.run_orchestration()`
- –£–±—Ä–∞–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π `import TaskRouter`

### 5. –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã `/start` –∏ `/init`
- –ó–∞–ø—É—Å–∫–∞—é—Ç `OnboardingFlow` –≤—Ä—É—á–Ω—É—é –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `/help`

---

## –ü—Ä–æ–±–ª–µ–º–∞: –∑–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω (–Ω–µ—Ä–µ—à–µ–Ω–∞)

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

Textual 7.x –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç `Stylesheet` –≤ `App.__init__` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 153:
```python
# textual/app.py line 151-153
# Note that the theme must be set *before* self.get_css_variables() is called
# to ensure that the variables are retrieved from the currently active theme.
self.stylesheet = Stylesheet(variables=self.get_css_variables())
```

`get_css_variables()` —á–∏—Ç–∞–µ—Ç `self.current_theme` ‚Üí `self.theme` (Reactive).
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `theme = Reactive("textual-dark")` ‚Üí `$background` = —Ç—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π.

### –ß—Ç–æ –ø—Ä–æ–±–æ–≤–∞–ª–∏ –∏ –ø–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ

| –ü–æ–¥—Ö–æ–¥ | –†–µ–∑—É–ª—å—Ç–∞—Ç | –ü—Ä–∏—á–∏–Ω–∞ |
|--------|-----------|---------|
| `self.design = {"dark": ColorSystem(...)}` –≤ `__init__` | ‚ùå | `Stylesheet` —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ä–∞–Ω—å—à–µ |
| `self.theme = "nord"` –≤ `on_mount` | ‚ùå | `Stylesheet` —É–∂–µ —Å–æ–∑–¥–∞–Ω —Å textual-dark |
| `os.environ["TEXTUAL_THEME"] = "nord"` –≤ `run_textual_shell` | ‚ùå | `textual.constants` —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω |
| `os.environ` –≤ –Ω–∞—á–∞–ª–µ –º–æ–¥—É–ª—è | ‚ùå | –î—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç textual —Ä–∞–Ω—å—à–µ |
| `theme = "nord"` –∫–∞–∫ class variable | ‚ùå | Reactive –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –∑–∞–º–µ–Ω—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π ‚Äî –ª–æ–º–∞–µ—Ç reactive –º–µ—Ö–∞–Ω–∏–∑–º |
| `get_css_variables()` override | ‚ùå | –ú–æ–∂–Ω–æ, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø—Ä–æ—Å–∏–ª –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å |
| `register_theme` + `self.theme = "arctic"` –≤ `__init__` | ‚ùå | –ü–æ—Å–ª–µ `super().__init__()` ‚Äî —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ |

### –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (—á–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)
```python
def __init__(self, config_manager):
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º _reactive_theme –¥–æ super().__init__()
    # —á—Ç–æ–±—ã Stylesheet —Å–æ–∑–¥–∞–ª—Å—è —Å Nord –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
    object.__setattr__(self, "_reactive_theme", "nord")
    super().__init__()
```

–≠—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ reactive –î–û —Å–æ–∑–¥–∞–Ω–∏—è `Stylesheet` ‚Äî –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ç–µ—Å—Ç–∞—Ö:
```
stylesheet bg: #2E3440  ‚Üê Nord —Ü–≤–µ—Ç
```

**–ù–æ**: —Ñ–æ–Ω –≤—Å—ë —Ä–∞–≤–Ω–æ –∑–µ–ª—ë–Ω—ã–π –≤ —Ä–∞–Ω—Ç–∞–π–º–µ. –í–æ–∑–º–æ–∂–Ω–æ, `App.DEFAULT_CSS` –∏–ª–∏ CSS –≤–∏–¥–∂–µ—Ç–æ–≤ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç `$background` –ø–æ—Å–ª–µ, –∏–ª–∏ `_watch_theme` –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏.

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –¥–∞–ª—å—à–µ

### –í–∞—Ä–∏–∞–Ω—Ç A: App.DEFAULT_CSS

Textual `App` –∏–º–µ–µ—Ç —Å–≤–æ–π `DEFAULT_CSS`:
```python
# textual/app.py lines 304-359
DEFAULT_CSS = """
App {
    background: $background;
    color: $foreground;
    ...
}
"""
```
–í–æ–∑–º–æ–∂–Ω–æ, `App.DEFAULT_CSS` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –Ω–∞—à–µ–≥–æ `CSS` –∏ –±–µ—Ä—ë—Ç —Å—Ç–∞—Ä—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –î–æ–±–∞–≤–∏—Ç—å –≤ `MembriaApp.CSS`:
```css
App {
    background: $background;
}
```

### –í–∞—Ä–∏–∞–Ω—Ç B: _watch_theme –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

`_watch_theme` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ reactive **–º–µ–Ω—è–µ—Ç—Å—è**. –ï—Å–ª–∏ –º—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `object.__setattr__` –¥–æ `super().__init__()`, reactive –º–µ—Ö–∞–Ω–∏–∑–º –Ω–µ –∑–Ω–∞–µ—Ç –æ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏ `_watch_theme` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –í—ã–∑–≤–∞—Ç—å `self._watch_theme("nord")` —è–≤–Ω–æ –≤ `on_mount`.

### –í–∞—Ä–∏–∞–Ω—Ç C: SplashScreen –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç

`SplashScreen.DEFAULT_CSS` —Å–æ–¥–µ—Ä–∂–∏—Ç:
```css
Screen {
    background: $panel;
    ...
}
```
–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è splash, —ç—Ç–æ—Ç CSS –º–æ–∂–µ—Ç –æ—Å—Ç–∞–≤–ª—è—Ç—å —Å–ª–µ–¥—ã.

### –í–∞—Ä–∏–∞–Ω—Ç D: textual-dev –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `textual run --dev membria/interactive/textual_shell.py` —Å devtools –¥–ª—è –∏–Ω—Å–ø–µ–∫—Ü–∏–∏ CSS –¥–µ—Ä–µ–≤–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ CSS –ø—Ä–∞–≤–∏–ª–æ –∑–∞–¥–∞—ë—Ç –∑–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω.

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

### Textual –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è
- **Themes / Design system:** https://textual.textualize.io/guide/design/
- **Input widget:** https://textual.textualize.io/widgets/input/
- **CSS Variables:** https://textual.textualize.io/guide/CSS/#css-variables
- **App lifecycle:** https://textual.textualize.io/guide/app_lifecycle/
- **DEFAULT_CSS:** https://textual.textualize.io/guide/default_css/
- **Reactives:** https://textual.textualize.io/guide/reactivity/

### Textual –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
- `/Users/miguelaprossine/miniconda3/lib/python3.12/site-packages/textual/app.py`
  - –°—Ç—Ä–æ–∫–∞ 535: `theme: Reactive[str] = Reactive(constants.DEFAULT_THEME)`
  - –°—Ç—Ä–æ–∫–∞ 153: `self.stylesheet = Stylesheet(variables=self.get_css_variables())`
  - –°—Ç—Ä–æ–∫–∞ 1338: `get_css_variables()` ‚Äî —á–∏—Ç–∞–µ—Ç `current_theme`
  - –°—Ç—Ä–æ–∫–∞ 1422: `_watch_theme()` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç `_invalidate_css()` + `refresh_css`
- `/Users/miguelaprossine/miniconda3/lib/python3.12/site-packages/textual/theme.py`
  - Nord –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ç–µ–º–∞: `background="#2E3440"`, `surface="#3B4252"`, `primary="#88C0D0"`
- `/Users/miguelaprossine/miniconda3/lib/python3.12/site-packages/textual/constants.py`
  - `DEFAULT_THEME: Final[str] = get_environ("TEXTUAL_THEME", "textual-dark")`

### textual-dev
- https://github.com/Textualize/textual-dev/tree/main/src/textual_dev

### –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–Ω—ã–µ –¥–æ–∫–∏
- `/Users/miguelaprossine/membria-cli/docs/INTERACTIVE_CLI_SPEC.md` ‚Äî UI/UX —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤
- `/Users/miguelaprossine/membria-cli/docs/PHASE1_SHELL_REQUIREMENTS.md` ‚Äî —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è Phase 1
- `/Users/miguelaprossine/membria-cli/DESIGN_IMPROVEMENTS.md` ‚Äî –¥–∏–∑–∞–π–Ω —É–ª—É—á—à–µ–Ω–∏—è
- `/Users/miguelaprossine/membria-cli/ONBOARDING_VISUAL_GUIDE.md` ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã onboarding
- `/Users/miguelaprossine/membria-cli/PHASE1_UI_COMPLETE.md` ‚Äî —Å—Ç–∞—Ç—É—Å UI Phase 1

---

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∞–π–ª–∞

**`src/membria/interactive/textual_shell.py`**

```
MembriaApp
‚îú‚îÄ‚îÄ theme = Nord (—á–µ—Ä–µ–∑ _reactive_theme hack)  ‚Üê –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ
‚îú‚îÄ‚îÄ CSS = Nord $variables                       ‚Üê –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚îú‚îÄ‚îÄ StatusBar ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç (pipeline | ‚úì0 ‚äô0 | 0 tok | ‚úì graph)
‚îú‚îÄ‚îÄ SidePanel ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç (AGENTS, CALIBRATION, SESSION, LAST DECISIONS)
‚îú‚îÄ‚îÄ InputContainer ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç (membria ‚ñ∏ [input])
‚îî‚îÄ‚îÄ on_mount ‚Üí executor.run_orchestration()    ‚Üê –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
```

---

## –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å textual devtools
pip install textual-dev
textual run --dev -c "membria shell"

# 2. –í devtools (Ctrl+\) –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
#    - –ö–∞–∫–æ–µ CSS –ø—Ä–∞–≤–∏–ª–æ –∑–∞–¥–∞—ë—Ç background –Ω–∞ Screen/App
#    - –ö–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É $background –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å _watch_theme:
# –í on_mount –¥–æ–±–∞–≤–∏—Ç—å:
async def on_mount(self):
    self._watch_theme("nord")  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å Nord
    ...
```
